# 機材  
## SoundSpring  
スクリーンに展示する． 
PC:1台  
マイク:1本  
*音を鳴らすものが用意できるとよい*  
## SpetrumAnalyzer  
PC:SoundSpringと同じもの  
## ICA  
not implemented
## 曲当て  
PC:2,3台  
## しりとり  
PC:2台  
マイク:2本  
# 展示解説概要  
## SoundSpring
スクリーンに映す．  
小田倉の作った説明を貼っておく．  
たまにチャープなどを流す．  
ポスター解説:音の基礎  
## SpetrumAnalyzer  
見させる.ちょっと解説．  
ポスター解説:音の基礎  
## 曲当て  
説明スクリプトに則りつつ説明．  
適当に遊ばせる．  
ポスター解説:ICA  
## しりとり  
説明スクリプトに則りつつ説明．  
適当に遊ばせる．  
*説明の紙を作る*  
ポスター解説:音声認識，声質変換  
# 当日スタッフへのガイダンス  
## 環境整備  
+ SoundSpring→pyaudio,PyGame,numpy  
+ 音当て→pyaudio,PyQt4,scikit-learn,scipy,numpy  
+ SpetrumAnalyzer→pyaudio,numpy,pyqtgraph(pipから)  
+ しりとり→PyQt5,MeCab,pyaudio,sox  
## プログラムの使い方の説明  
+ SoundSpring→起動するだけ  
+ SpetrumAnalyzer→起動するだけ  
+ 曲当て→操作方法の紙  
+ しりとり→操作方法の紙  
## 理論冊子/ポスターの内容の説明  
頑張る．  
# ピアレビュー  
## 参加者  
久保，八嶋  
## 説明担当  
+ SoundSpring:久保  
+ SpetrumAnalyzer:八嶋  
+ 曲当て:八嶋  
+ しりとり:久保  
## 進め方  
それぞれの展示が独立しているのでそれぞれの説明をする．  
SoundSpring,SpetrumAnalyzer,曲当て，しりとりの順．  
## 説明スクリプト  
### SoundSpring  
音を入れると音の高さ，大きさに応じてボールが湧き出します．  
まず，440Hzのラの音を入れてみると，こんな感じになります．  
次に440Hzと880Hzの音を入れると，こんな感じです．ヘルツが2倍になるとオクターブ上の音になります．  
そしてさらにそこに1760Hzの音を入れるとこんな感じになります．  
SoundSpringではオクターブが違う音は色の明るさの違いで表されているので，同じ感じの色で明るさが違うボールが出てきます．  
次にチャープ信号という，高さが連続的に変わる音を入れてみます． 
音の高さは色の色相に対応していて，このように虹色のボールが出てきます．  
もちろん同じことが声でもできるので，試してみてください．  
### SpetrumAnalyzer  
こちらは音を入れると周波数スペクトルが表示されます．  
周波数とは高さを表していて，どの高さの音がどのくらい含まれるかを表したのが周波数スペクトルです．  
(お客さんによっては説明)周波数スペクトルが何かをちゃんと説明→音の信号をフーリエ変換したものです．フーリエ変換は三角波の合成．  
画面上では両対数表示している．  
### SoundSpring & SpetrumAnalyzer(本番)  
音を入れると音の高さ，大きさに応じてボールが湧き出します． 
こちらではそのときの音に，どの高さの音がどのくらい含まれるかを表しています．
まず，440Hzのラの音を入れてみると，こんな感じになります．  
次に440Hzと880Hzの音を入れると，こんな感じです．ヘルツが2倍になるとオクターブ上の音になります．  
そしてさらにそこに1760Hzの音を入れるとこんな感じになります．  
SoundSpringではオクターブが違う音は色の明るさの違いで表されているので，同じ感じの色で明るさが違うボールが出てきます．  
次にチャープ信号(線形を流す)という，高さが連続的に変わる音を入れてみます．周波数スペクトルを見てみると山がなめらかに移動していることが分かりますよね．  
音の高さは色の色相に対応していて，このように虹色のボールが出てきます．
もうひとつ，変化の仕方の異なるチャープを入れてみましょう(指数を流す)．さっきは周波数スペクトルで移動する山の速度が後半遅くなっていたのに対して，こちらは一定速度で動いていますよね．→not implemented. 直線と指数のグラフを描いた紙とかを見せて，どっちか当てさせるとかするなど．人間の聴覚は対数的という説明．
もちろん同じことが声でもできるので，試してみてください．  
### 曲当て  
まず，楽曲セットボタンを押すと，ランダムに選ばれた複数の楽曲がミックスされた音源が，この混合音源のところにセットされます．再生を押すと聞こえるので，聴き分けてみてください．  
まず2曲でセット，再生→なんの曲かわかりますか？→答えられる→分離・復元ボタンを押すとミックスされる前の音源をコンピュータが復元します．  
正解です！/残念ですね．おそらくミックス音源を聴いたときに，一つ一つの曲に注目して聴こうとして，順番に考えたと思います．混ざった音から自分の聴きたい音だけを聴くことができるのを，カクテルパーティー効果といいます．  
このプログラムではカクテルパーティー効果を，音楽について何の情報もないコンピュータにシミュレーションさせています．  
では，曲数を3曲に増やすとどうでしょうか→難しいですね．1曲2曲までなら行けるかもしれないですが，3曲目が聴こえないことが多いです．でも，コンピュータならいけます．→答え合わせ  
さらに10曲に増やしてみます．試しに聴いてみてください．→もう何がなんだか分かりませんね．聖徳太子はこれを出来たらしいですが．コンピュータなら10曲でも出来るんです．理論的には曲数分のミックス音源があれば分離できますが，曲の組み合わせによってはミスることもあります．  
実は，音源分離はこのような連立方程式の解を求める問題と考えることが出来るんですね(プリントを指差しながら)．今yが分かっていて，xを求めたいのですが，aが分かっていれば中学生でも解けます．ですが，この状況では曲がどうミックスされているか分からないので，aすらも分からないということになるんですね．  
そこで，元の音源が独立であるという仮定をおくことによってこの方程式を解いています．その手法を独立成分分析といいます．  
人間は曲を知っているから2曲程度なら何が流れているかわかりますが，知らない曲だとわからないこともあります．  
コンピュータなら全く事前の情報がない状態でも独立という仮定だけから元の音源を推定することが出来て，これを専門的にはBlind Source Separationと呼びます．  
### しりとり  
音を吹き込むと音声を認識して，しりとりが成り立つように単語を返します．  
音声認識は音声認識を扱う会社の提供するAPIを用いているので，文章で話しても実は認識してくれます．(適当にしゃべる)  
この6人の声が収録されていて，それぞれ聴くことが出来ます．  
でも実は，この全員に喋ってもらったのを録音しているわけではなくて，実際は一人しか録音していません．  
mei以外の4人の声は，久保さんの声を変換することによって作り出した音声です．
声質の変換なんですが，変換元と変換先の人にそれぞれ200文ほどの文章を読み上げてもらい，その人の声の特徴を抽出して，  
その特徴量を変換することで実現しています．具体的には声道や口の形状がその人の声色を特徴づけているので，  
それを表す量を抽出して変換しています．特徴量や抽出の方法についてはポスターにまとめたので興味があるかたは読んでみてください．  
この技術はシステム情報学専攻の第一研究室の高道 慎之介 特任助教に技術提供を頂いています．  
またこのzunkoというのは東北ずん子という東北を盛り上げるためのキャラクターなどの運営会社がありまして，畝位が新しく収録したキャラクターの音源として，高道先生を通じて503の文章を読み上げた音声をいただきました．  
実際にはしりとりの単語は合計で2000単語ほどあるのですが，全部久保が吹き込みました．汗と涙の結晶なのでぜひ遊んでください．   
# Q&A
## SoundSpring  
+ 高さの取り出し方  
高さは音にフーリエ変換という変換を施すことで取り出しています．フーリエ変換すると，どの高さの音がどのくらいの割合を占めているかというのが得られるので，それに応じてボールを湧き出させています．  
## SpetrumAnalyzer  
+ 軸について  
画面上では両対数表示しています．縦方向は単純にそのほうが見やすいからです．  
横方向はつまり周波数を対数表示しているということになりますが，人間は周波数の関係を対数的に捉えています．  
すなわち周波数が2倍になったらオクターブが1つ，4倍になったら2つ上がるという感覚の仕方なので，  
周波数を対数表示すると例えばドの音が等間隔にならんで見やすくなります．  
## 曲当て  
+ 復元率  
復元率は元の信号との相関係数を用いています．これは混合音源と復元音源で音量が変わっているためです．  
+ タイトル  
タイトルは候補曲の中から復元音源と最も相関が高いものを探して返しています．  
## しりとり  
+ 音声認識API  
アドバンストメディア社の提供するAPIです．  

